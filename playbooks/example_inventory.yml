---
# Example inventory configuration for BCM dynamic inventory plugin
# Save this as inventory/bcm.yml and use with: ansible-inventory -i inventory/bcm.yml --list

plugin: nvidia.bcm.bcm_inventory

# BCM head node (use localhost if running on the head node)
host: localhost

# Path to pythoncm library (adjust if needed)
pythoncm_path: /cm/local/apps/cmd/pythoncm/lib/python3.12/site-packages

# Automatically create groups based on node categories
group_by_category: true

# Automatically create groups based on node roles
group_by_role: true

# Create custom groups based on host variables
keyed_groups:
  # Group nodes by status (e.g., status_up, status_down)
  - key: bcm_status
    prefix: status

  # Group nodes by category (redundant with group_by_category, just an example)
  - key: bcm_category
    prefix: cat

# Add computed variables to hosts
compose:
  # Use IP address for ansible_host
  ansible_host: bcm_ip

  # Create a fully qualified domain name
  fqdn: bcm_hostname

  # Mark GPU nodes (example)
  is_gpu_node: '"gpu" in (bcm_category | lower)'
